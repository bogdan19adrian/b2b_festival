<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    {% load static %}
    <link rel="apple-touch-icon" sizes="76x76" href={% static '/main/assets/img/apple-icon.png' %}>
    <link rel="icon" type="image/png" href={% static '/main/assets/img/favicon.png' %}>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>
        BtoB Dance Festival
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
          name='viewport'/>
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet"/>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <!-- CSS Files -->
    <link type="text/css" href={% static '/main/assets/css/bootstrap.min.css' %} rel="stylesheet"/>
    <link type="text/css" href={% static '/main/assets/css/paper-kit.css' %} rel="stylesheet"/>

        <script src="https://js.api.here.com/v3/3.1/mapsjs-core.js"
            type="text/javascript" charset="utf-8"></script>
    <script src="https://js.api.here.com/v3/3.1/mapsjs-service.js"
            type="text/javascript" charset="utf-8"></script>

</head>
<body id="b2bhome" data-spy="scroll" data-target=".navbar" data-offset="50" class="landing-page sidebar-collapse">
<!-- Navbar -->
<nav class="navbar navbar-expand-lg fixed-top navbar-transparent " color-on-scroll="300">
    <div class="container">
        <div class="navbar-translate">
            <a class="navbar-brand" href="{% url 'main:homepage' %}" rel="tooltip" title="Coded by Creative Tim"
               data-placement="bottom">
                B2B Festival
            </a>
            <button class="navbar-toggler navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
                    aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
            </button>
        </div>
        <div class="collapse navbar-collapse justify-content-end" id="navigation">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a href="#about" class="nav-link" style="padding: 12px 12px;!important;"><i
                            class="nc-icon nc-layout-11"></i>ABOUT</a>
                </li>
                <li class="nav-item">
                    <a href="#lastedition" class="nav-link" style="padding: 12px 12px;!important;"><i
                            class="nc-icon nc-album-2"></i>EDITION 2019</a>
                </li>
                <li class="nav-item">
                    <a href="#confirmed_artists" class="nav-link" style="padding: 12px 12px;!important;"><i
                            class="nc-icon nc-album-2"></i>CONFIRMED
                        ARTISTS</a>
                </li>
                <li class="nav-item">
                    <a href="#pricing" target="_blank" class="nav-link" style="padding: 12px 12px;!important;">
                        <i class="nc-icon nc-money-coins"></i> PRICING</a>
                </li>
                <li class="nav-item">
                    <a href="#program" class="nav-link" style="padding: 12px 12px;!important;"><i
                            class="nc-icon nc-album-2"></i>PROGRAM</a>
                </li>
                <li class="nav-item">
                    <a href="#location" class="nav-link" style="padding: 12px 12px;!important;"><i
                            class="nc-icon nc-map-big"></i>LOCATION</a>
                </li>
                <li class="nav-item">
                    <a href="#danceschool" class="nav-link" style="padding: 12px 12px;!important;"><i
                            class="nc-icon nc-album-2"></i>DANCE SCHOOL</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" rel="tooltip" title="Like us on Facebook" data-placement="bottom"
                       href="https://www.facebook.com/bachatatakeoverbucharestdancefestival/" target="_blank">
                        <i class="fa fa-facebook-square"></i>
                        <p class="d-lg-none">Facebook</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" rel="tooltip" title="Follow us on Instagram" data-placement="bottom"
                       href="" target="_blank">
                        <i class="fa fa-instagram"></i>
                        <p class="d-lg-none">Instagram</p>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!-- End Navbar -->

{% block content %}{% endblock content %}
<footer class="footer  footer-black " style="background-color: #1b1e21 !important;">
    <div class="container">
        <a class="up-arrow" href="#b2bhome" data-toggle="tooltip" title="TO TOP">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </a><br><br>
    </div>
</footer>
<!--   Core JS Files   -->
<script src={% static '/main/assets/js/core/jquery.min.js' %} type="text/javascript"></script>
<script src={% static '/main/assets/js/core/popper.min.js' %} type="text/javascript"></script>
<script src={% static '/main/assets/js/core/bootstrap.min.js' %} type="text/javascript"></script>
<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src={% static '/main/assets/js/plugins/bootstrap-switch.js' %}></script>
<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
<script src={% static '/main/assets/js/plugins/nouislider.min.js' %} type="text/javascript"></script>
<!--  Plugin for the DatePicker, full documentation here: https://github.com/uxsolutions/bootstrap-datepicker -->
<script src={% static '/main/assets/js/plugins/moment.min.js' %}></script>
<script src={% static '/main/assets/js/plugins/bootstrap-datepicker.js' %} type="text/javascript"></script>
<!-- Control Center for Paper Kit: parallax effects, scripts for the example pages etc -->
<script src={% static '/main/assets/js/paper-kit.js' %} type="text/javascript"></script>
<!--  Google Maps Plugin    -->

<script>
    // Instantiate a map and platform object:
    var platform = new H.service.Platform({
        'apikey': ''
    });

    // Obtain the default map types from the platform object
    var maptypes = platform.createDefaultLayers();
    var map = new H.Map(
        document.getElementById('mapContainer'),
        maptypes.vector.normal.map,
        {
            zoom: 16,
            center: {lng: 26.1068184, lat: 44.4737945}
        });
    var svgMarkup = '<svg width="24" height="24" ' +
        'xmlns="http://www.w3.org/2000/svg">' +
        '<rect stroke="white" fill="#1b468d" x="1" y="1" width="22" ' +
        'height="22" /><text x="12" y="18" font-size="12pt" ' +
        'font-family="Arial" font-weight="bold" text-anchor="middle" ' +
        'fill="white"></text></svg>';

    // Create an icon, an object holding the latitude and longitude, and a marker:
    var icon = new H.map.Icon(svgMarkup),
        coords = {lat: 44.4737945, lng: 26.1068184},
        marker = new H.map.Marker(coords, {icon: icon});

    // Add the marker to the map and center the map at the location of the marker:
    map.addObject(marker);
    map.setCenter(coords);
</script>
<script>
    $(document).ready(function () {
        // Initialize Tooltip
        // Add smooth scrolling to all links in navbar + footer link
        $(".navbar a, footer a[href='#myPage']").on('click', function (event) {
            // Make sure this.hash has a value before overriding default behavior
            if (this.hash !== "") {
                // Prevent default anchor click behavior
                event.preventDefault();

                // Store hash
                var hash = this.hash;

                // Using jQuery's animate() method to add smooth page scroll
                // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
                $('html, body').animate({
                    scrollTop: $(hash).offset().top
                }, 900, function () {

                    // Add hash (#) to URL when done scrolling (default click behavior)
                    window.location.hash = hash;
                });
            } // End if
        });

        $(window).scroll(function () {
            $(".slideanim").each(function () {
                var pos = $(this).offset().top;

                var winTop = $(window).scrollTop();
                if (pos < winTop + 600) {
                    $(this).addClass("slide");
                }
            });
        });
    })
</script>
<script>
    let priceInEuro;
    let priceInRon;
    let pass_type;
    let paymentOption;

    function seletctPayment(event) {
        var e = document.getElementById("paymentOption");
        var option = e.options[e.selectedIndex].value;
        console.log("the select payment dropdown has been changed", option);

        if (option != null && option === 'PayPal') {
            $("#alertPricePayPal").addClass("alert alert alert-danger");
            $("#alertPricePayPal").text("WARNING! IF you choose to pay via PayPal you will have to pay 5 Euros in addition to the value of the ticket");
            paymentOption = option;
        }
    }

    function openBuyTicketsModal(euro, ron, passType) {
        console.log('tesert', euro, ron, passType);
        console.log('tesert', euro, ron, passType);
        priceInEuro = euro;
        priceInRon = ron;
        pass_type = passType;
        document.getElementById("ModalLabel").innerHTML = "Buying a" + " " + passType;
    }

    $("#submitBuyTickets").click(function () {
        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
                function getCookie(name) {
                    var cookieValue = null;
                    if (document.cookie && document.cookie != '') {
                        var cookies = document.cookie.split(';');
                        for (var i = 0; i < cookies.length; i++) {
                            var cookie = jQuery.trim(cookies[i]);
                            // Does this cookie string begin with the name we want?
                            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                break;
                            }
                        }
                    }
                    return cookieValue;
                }

                if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                    // Only send the token to relative URLs i.e. locally.
                    xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                }
            }
        });
        var form = $('#submitBuyTickets');
        console.log('submitBuyTickets', form);
        var email = $('#email').val();
        var firstName = $('#firstName').val();
        var lastName = $('#lastName').val();
        if (paymentOption == null) {
            var e = document.getElementById("paymentOption");
            paymentOption = e.options[e.selectedIndex].value;
        }
        var data = {
            euro: priceInEuro,
            ron: priceInRon,
            email: email,
            firstName: firstName,
            lastName: lastName,
            passType: pass_type,
            paymentOption: paymentOption
        };
        $.post("{% url 'main:buyTickets' %}", data);
        priceInEuro = null,
            priceInRon = null,
            email = null,
            firstName = null,
            lastName = null,
            pass_type = null,
            paymentOption = null;
        document.getElementById("buyTickets").reset();
        $("#alertPricePayPal").removeClass("alert alert alert-danger");
        $("#alertPricePayPal").text("");
        document.getElementById("buyTickets").reset();
    });

    {#$(document).on('submit', '#contactFestival', function (e) {#}
    $("#submitFestivalMessage").click(function () {
        console.log($('#termsFestMessage').is(":checked"));
        if ($('#termsFestMessage').is(":checked") === false) {
            $('#errorMsgFest').prepend(
                '<br>' +
                '<div class="alert alert-danger" role="alert">\n' +
                '  You must agree terms and conditions if you want to prceed' +
                '</div>');
            setTimeout(function () {
                document.getElementById("errorMsgFest").innerHTML = '';
            }, 7000);
            return;
        }
        $.ajax({
            type: 'POST',
            url: '{% url "main:festivalMessage" %}',
            data: {
                nameFestMessage: $('#nameFestMessage').val(),
                emailFestMessage: $('#emailFestMessage').val(),
                messageFestMessage: $('#messageFestMessage').val(),
                termsFestMessage: $('#termsFestMessage').is(":checked"),
                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                action: 'post'
            },
            success: function (json) {
                document.getElementById("contactFestival").reset();
            },
            error: function (xhr, errmsg, err) {
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    });

</script>
</body>

</html>